<!DOCTYPE html>
<html>
<head>

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>

<meta name="keywords" content="ethernet 16-axis controller, cnc control, motion control, cnc boards, 4-axis, 8-axis, stepper, brushless, DC motor, servo, encoder, adc, dac, motion controller, automated motion, manufacturing, Mach3">
<meta name="description" content="Manufacturer of premium motion control products for CNC Manufacturing, Robotics and Automation">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta http-equiv="Content-Language" content="en-us">

<title>KStep Connectors</title>

<link rel="stylesheet" type="text/css" href="../css/style.css">
<link rel="stylesheet" href="../css/prism.css" data-noprefix />
<script src="../js/prism.js"></script>
</head>

<body>

<div id="logo"><a href="../index.htm"></a></div>

<div id="home">
<a href="../index.htm">Table of contents</a> |  
	<script>
		if (navigator.userAgent.indexOf("NT 6.2") == -1){
			document.write('<a href="https://www.dynomotion.com">Dynomotion home page</a>')
		} else {
			document.write('<a href="https://www.dynomotion.com" target="_blank">Dynomotion home page</a>')
		}
	</script>
</div>
	
<div id="searchNav">

	<div class="gcse-search">
					<script>
					  if (document.location.protocol  ==  'https:') {
					  (function() {
					  var cx = '012657033059195044748:9fmjmlufts0';
					  var gcse = document.createElement('script');
					  gcse.type = 'text/javascript';
					  gcse.async = true;
					  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					      '//cse.google.com/cse.js?cx=' + cx;
					  var s = document.getElementsByTagName('script')[0];
					  s.parentNode.insertBefore(gcse, s);
					})();
					  }
				      </script> 
				      <gcse:search> </gcse:search>  

	       </div>
</div>	

	


<div id="google_translate_element" style="background: transparent;" align="right"><script type="text/javascript">
if (navigator.userAgent.indexOf("NT 6.2") == -1) {
		function googleTranslateElementInit() {
	  new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'en,de,fr,it,es,pt,ru,uk,ar,zh-CN,zh-TW,ko,iw,hi,ja,tr', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
		}						}
	</script>
	<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit">
	</script>
</div>		
<div id="main">

<h1>KStep - Connector Pinouts</h1>

<p><img src="KStepConnectors.png" width="800" height="639" alt="KStep Connectors" /></p>

<h2>J1 Motor Power</h2>

<p><img src="J1.png" width="132" height="154" alt="J1" /></p>

<p>Motor power VBB from 12-48V may be applied through J1 or 
alternately through JR1. For applications that require more than 10A of 
supply current both of the GND and VBB connections should be used.</p>

<p class="warning">Caution: Voltage Clamp jumpers must be set to a 
Higher Voltage than the applied voltage.</p>

<p class="warning">Caution: If JR1 is connected to a PC Power Supply, 12V 
will be applied to VB.</p>

<h2>J2 J3 J4 J5</h2>

<p><img src="MotorConnections.png" alt="Motor Connections" /></p>
<p><img src="J2J3J4J5.png" width="458" height="118" alt="J2 J3 J4 J5" /></p>

<p>Connect Stepper Motors to connectors J2 through J5.
A Stepper Motor has two independent coils A and B.This should be verified 
with an Ohmmeter. Connect one motor coil across the A terminals and the 
other coil across the B terminals.</p>

<p class="warning">Caution: Cross wiring the motor terminals is likely 
to cause damage to KStep and/or the motor.</p>

<h2>Voltage Clamping</h2>

<p><img src="VoltClamp.JPG" width="220" height="183" alt="Voltage Clamping" /></p>

<p>KStep features a jumper programmable Voltage Clamping 
Circuit. Voltage spikes due to Regenerative Braking and other sources can 
potentially raise the supply voltage up to a level that can damage electronics 
including KStep or the power supply. Voltage Spikes may also cause a power 
supply to trip a fault and shut down. KStep's Voltage clamp can be used to 
avoid these problems. KStep's Voltage Clamp can be programmed for 4 
different voltage levels. It is not possible to disable the Voltage Clamp 
but the clamping voltage level may be changed. With all jumpers 
removed the Voltage will be clamped at 49V. Each jumper added will reduce 
the Clamping voltage by 12V. The order of the jumpers is not important as 
each reduces the Voltage by the same amount (12V). This allows common 
supply voltages of 12, 24, 36, and 48V to be used.</p>

<p class="warning">Caution: Connecting a supply voltage higher than the 
clamping voltage will draw excessive current and is likely to cause damage to 
KStep or the Power Supply.</p>

<table class="tableSmall">
  <tr>
    <th>Jumpers Installed</th>
    <th>Example</th>
    <th>Clamping Level</th>
  </tr>
  <tr>
    <td>None</td>
    <td>None</td>
    <td>49V</td>
  </tr>
  <tr>
    <td>1</td>
    <td>A</td>
    <td>37V</td>
  </tr>
  <tr>
    <td>2</td>
    <td>A+B</td>
    <td>25V</td>
  </tr>
  <tr>
    <td>3</td>
    <td>A+B+C</td>
    <td>13V</td>
  </tr>
  </table>
  
<h2>JP26</h2>

<p><img src="JP26.png" width="250" height="188" alt="JP 26" /></p>

<p>KStep can accept Step/Dir signals in from either JP26 or 
JP36 whichever is more convenient. Normally if two KSteps are connected to 
KFLOP/Kogna in order to have 8 axes in the system then JP26 will be used for the 2nd 
KStep. KFLOP/Kogna drives Step/Dir Generators 4 - 7 on its JP5 connector which 
when connected to KStep's JP26 connector will drive Motors 0 - 3. When 
driving signals into JP26 GND, +5V and Enable must be provided into KStep in 
some manner. J6 is usually the simplest but JR1 and JP36 are also 
possibilities.</p>

<table class="tableSmall">
  <tr>
    <th>Pin</th>
    <th>KFLOP/Kogna Name</th>
    <th>KFLOP/Kogna Output</th>
    <th>KStep Input</th>
  </tr>
  <tr>
    <td>1</td>
    <td>IO36</td>
    <td>Step 4</td>
    <td>Step 0</td>
  </tr>
  <tr>
    <td>2</td>
    <td>IO37</td>
    <td>Dir 4</td>
    <td>Dir 0</td>
  </tr>
  <tr>
    <td>3</td>
    <td>IO38</td>
    <td>Step 5</td>
    <td>Step 1</td>
  </tr>
  <tr>
    <td>4</td>
    <td>IO39</td>
    <td>Dir 5</td>
    <td>Dir 1</td>
  </tr>
  <tr>
    <td>5</td>
    <td>IO40</td>
    <td>Step 6</td>
    <td>Step 2</td>
  </tr>
  <tr>
    <td>6</td>
    <td>IO41</td>
    <td>Dir 6</td>
    <td>Dir 2</td>
  </tr>
  <tr>
    <td>7</td>
    <td>IO42</td>
    <td>Step 7</td>
    <td>Step 3</td>
  </tr>
  <tr>
    <td>8</td>
    <td>IO43</td>
    <td>Dir 7</td>
    <td>Dir 3</td>
  </tr>
  </table>
  

<h2>Disable Optos Jumper</h2>

<p><img src="DisableOpto.JPG" width="175" height="156" alt="Disable Opto Jumper" /></p>

<p>KStep normally drives JP36 pins 11 - 14 with selected Opto 
Input Data. If Opto Input Data is not desired this jumper disables this 
feature and leaves these pins in a high impedance state. This might be 
necessary if the connection to KFLOP/Kogna desires to use the associated pins for some 
other purpose such as KFLOP/Kogna Encoder inputs #2 and #3.</p>

<h2>JR1</h2>

<p><img src="JR1.JPG" width="200" height="166" alt="JR1" /></p>

<p>JR1 is a molex Disk drive type connector that can be used 
to provide Motor power (VBB) and +5V to KStep. Motor power is common to 
all 4 Motor Drives and may be applied either through JR1 or J1 screw terminals.
A PC Power Supply often provides +5V on pin 4 and +12V on Pin 1 so caution 
should be made to assure different power supply voltages are not connected to 
both JR1 and J1. The +5V connection is used to power the Motor driver 
circuits. The +5V and GND connections are to the motor side of the 
isolation and will be isolated from the KFLOP/Kogna side if the Isolation Jumpers are 
removed.</p>

<h2>JP33 </h2>

<p><img src="JP33.png" width="275" height="174" alt="JP33" /></p>

<p>KStep adds 2 opto isolated relay drivers (100ma @ 36V), 
one Analog Output, and 16 opto isolated 12-24V inputs. All these IO are 
optically isolated regardless of the Isolation Jumpers set for the Isolation on 
the Step/Dir and enable signals. Opto Inputs have a common Anode normally 
connected to either +12V or +24V. Shorting any of the OPTO- pins to GND 
will activate the input. The Opto Inputs have a 10K ohm series resistance.</p>

<p><img src="JP33Schematic.png" width="268" height="227" alt="JP33 Schematic" /></p>

<table class="tableSmall">
  <tr>
    <th>JP33 Pin</th>
    <th>KStep Signal</th>
    <th>KFLOP/Kogna Related Signal</th>
  </tr>
  <tr>
    <td>1</td>
    <td>Relay0+</td>
    <td>IO 0 Output</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Relay0-</td>
    <td>IO 0 Output</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Relay1+</td>
    <td>IO 1 Output</td>
  </tr>
  <tr>
    <td>4</td>
    <td>Relay1-</td>
    <td>IO 1 Output</td>
  </tr>
  <tr>
    <td>5</td>
    <td>Analog Vcc</td>
    <td></td>
  </tr>
  <tr>
    <td>6</td>
    <td>Analog Out</td>
    <td>IO 44 PWM Output</td>
  </tr>
  <tr>
    <td>7</td>
    <td>Analog Gnd</td>
    <td></td>
  </tr>
  <tr>
    <td>8</td>
    <td>Opto Anode</td>
    <td></td>
  </tr>
  <tr>
    <td>9</td>
    <td>Opto IN 0</td>
    <td>IO 168 Input</td>
  </tr>
  <tr>
    <td>10</td>
    <td>Opto IN 1</td>
    <td>
	IO 169 Input</td>
  </tr>
  <tr>
    <td>11</td>
    <td>Opto IN 2</td>
    <td>IO 170 Input</td>
  </tr>
  <tr>
    <td>12</td>
    <td>Opto IN 3</td>
    <td>IO 171 Input</td>
  </tr>
  <tr>
    <td>13</td>
    <td>Opto IN 4</td>
    <td>IO 172 Input</td>
  </tr>
  <tr>
    <td>14</td>
    <td>Opto IN 5</td>
    <td>IO 173 Input</td>
  </tr>
  <tr>
    <td>15</td>
    <td>Opto IN 6</td>
    <td>IO 174 Input</td>
  </tr>
  <tr>
    <td>16</td>
    <td>Opto IN 7</td>
    <td>IO 175 Input</td>
  </tr>
  <tr>
    <td>17</td>
    <td>Opto IN 8</td>
    <td>IO 176 Input</td>
  </tr>
  <tr>
    <td>18</td>
    <td>Opto IN 9</td>
    <td>IO 177 Input</td>
  </tr>
  <tr>
    <td>19</td>
    <td>Opto IN 10</td>
    <td>IO 178 Input</td>
  </tr>
  <tr>
    <td>20</td>
    <td>Opto IN 11</td>
    <td>IO 179 Input</td>
  </tr>
  <tr>
    <td>21</td>
    <td>Opto IN 12</td>
    <td>IO 180 Input</td>
  </tr>
  <tr>
    <td>22</td>
    <td>Opto IN 13</td>
    <td>IO 181 Input</td>
  </tr>
  <tr>
    <td>23</td>
    <td>Opto IN 14</td>
    <td>IO 182 Input</td>
  </tr>
  <tr>
    <td>24</td>
    <td>Opto IN 15</td>
    <td>IO 183 Input</td>
  </tr>
  <tr>
    <td>25</td>
    <td>Vdd +5V</td>
    <td>+5V KFLOP<br /> (if non isolated)</td>
  </tr>
  <tr>
    <td>26</td>
    <td>GND KStep</td>
    <td>GND KFLOP<br /> (if non isolated)</td>
  </tr>
  </table>

<h2><a name="Optically_isolated_Inputs">Optically isolated Inputs</a></h2>

<p>The input circuit for 4 of the 16 opto inputs is shown 
below. Note there is a common Anode for all 16 opto inputs which is normally 
tied to a +12 or +24V supply. Each of the negative opto pins are then 
switched to ground (return for the +12 or +24V supply).</p>

<p><img src="OptoInputCircuit.png" width="546" height="245" alt="OptoInputCircuit" /></p>

<p>External Wiring would typically be arranged such as:</p>

<p><img src="OptoIns66.png" width="433" height="384" alt="OptoInputCircuit" /></p>

<h2><a name="PWM_to_Analog_Circuit">Optically isolated PWM to Analog Circuit</a></h2>

<p>A 3.3V PWM output from KFLOP/Kogna IO 44 JP7 pin 5 is normally 
connected to KStep JP36 Pin 5 to drive the PWM to Analog circuitry. Often 
a VFD will have 3 input terminals where a potentiometer can be connected as 
speed control. The three connections AnalogVcc, AnalogOut, and AnalogGnd 
can be connected to perform a similar function as a potentiometer. The 
AnalogOut voltage will vary from AnalogGnd to AnalogVcc voltage as a function of 
the PWM duty cycle.</p>

<p><img src="IsolatedPWMtoAnalog.png" width="673" height="328" alt="IsolatedPWMtoAnalog" /></p>

<p><img src="AnalogOut66.png" width="479" height="162" alt="AnalogOut66" /></p>

<h2><a name="Relay_Driver_Outputs">Relay Driver Outputs</a></h2>

<p>Two Optically Isolated Outputs are provided to drive 
medium power devices such as relay coils. Loads up to 30V @100ma may 
be driven.</p>

<p>The internal KStep circuitry is shown below which converts 
the incoming 3.3V LVTTL inputs to darlington transistor outputs.</p>

<p><img src="RelayDrivers.png" width="446" height="162" alt="RelayDrivers" /></p>

<p>A typical wiring diagram driving 24V relays.</p>

<p><img src="RelaysKStep.png" width="541" height="416" alt="RelaysKStep" /></p>

<h2>JP31 JP32 PFD1 PFD2 Jumpers</h2>

<p>These Jumpers can be used to control the Fast/Slow/Mixed 
delay settings of all 4 Motor Drives. In almost all cases these jumpers 
should remain removed for best performance.</p>

<h2>Current Setting Jumpers</h2>

<p>Current for each Stepper Coil is set with a set of 3 
jumpers labeled H M L (high, medium, low).</p>

<p>Both sets of 3 jumpers for each motor coils must be set to 
the same level.</p>

<table class="tableSmall">
	<tr>
		<th>H</th>
		<th>M</th>
		<th>L</th>
		<th>Current (Amps)</th>
	</tr>
	<tr>
		<td>Removed</td>
		<td>Removed</td>
		<td>Removed</td>
		<td>0.63</td>
	</tr>
	<tr>
		<td>Removed</td>
		<td>Removed</td>
		<td>Installed</td>
		<td>1.25</td>
	</tr>
	<tr>
		<td>Removed</td>
		<td>Installed</td>
		<td>Removed</td>
		<td>1.88</td>
	</tr>
	<tr>
		<td>Removed</td>
		<td>Installed</td>
		<td>Installed</td>
		<td>2.50</td>
	</tr>
	<tr>
		<td>Installed</td>
		<td>Removed</td>
		<td>Removed</td>
		<td>3.13</td>
	</tr>
	<tr>
		<td>Installed</td>
		<td>Removed</td>
		<td>Installed</td>
		<td>3.75</td>
	</tr>
	<tr>
		<td>Installed</td>
		<td>Installed</td>
		<td>Removed</td>
		<td>4.38</td>
	</tr>
	<tr>
		<td>Installed</td>
		<td>Installed</td>
		<td>Installed</td>
		<td>5.00</td>
	</tr>
</table>

<h2>JP36 To KFLOP/Kogna</h2>

<p><img src="JP36.png" width="300" height="113" alt="JP36" /></p>

<p>JP36 is designed to connect directly to KFLOP's/Kogna's JP7 in a 
1:1 connection. KFLOP/Kogna is then able to supply the 4 sets of Step/Dir 
signals, the Enable, the Analog PWM signal, the 2 Relay Driver outputs, and 
connections for the 16 opto inputs, as well as +5V (used if running without opto 
isolation). To conserve KFLOP/Kogna IO pins, the 16 opto inputs are read back in 
a multiplexed fashion 4 bits at a time, where 2 outputs from KFLOP/Kogna select which 
bank of 4 are currently selected.+3.3V is also provided to power the opto 
multiplexing circuitry.</p>

<p><img src="Jp36schematic.png" width="305" height="221" alt="JP36 Schematic" /></p>

<h2>JP34 JP35 Isolation Jumpers</h2>

<p><img src="Isolation.JPG" width="200" height="138" alt="Isolation Jumpers" /></p>

<p>KStep allows all the Motor Power and +5V Mosfet circuitry 
to be totally optically isolated from the KFLOP/Kogna Step/Dir and Enable signals.
To operate with total isolation remove JP34 and JP35. However in this mode 
an additional +5V supply must be provided and applied to either J6 or JR1.
With the jumpers installed KStep will make use of KFLOP/Kogna +5V and KFLOP/Kogna GND coming 
in through connector JP36 and no additional supply will be required. The
<a href="../BlockDiagramKStep.htm">Block Diagram</a> shows how the isolation is 
sectioned.</p>

<p>Regardless of these jumpers installed or not the 12-24V 
Optically isolated Inputs, the 2 Relay Driver outputs, and the Analog Output 
will always be fully optically isolated.</p>

<h2>J6 - GND, +5V, Enable, 3.3V GND</h2>

<p><img src="J6.png" width="250" height="121" alt="J6" /></p>

<p>J6 provides a connection point for +5V and GND to power 
the KStep Mosfet Drive Circuitry if operated in Isolated mode. The Enable 
connection allows a means of enabling KStep amplifiers if JP36 is not used to 
enable the amplifiers. Controller 3.3V GND is the same GND as on JP36 
which is the KFLOP/Kogna or Controller Ground which is reference for the Step/Dir 
signals and Enable Signals. The Isolation Jumpers can be used to isolate 
or connect the two GND terminals on this connector.</p>

	</div>

</body>

</html>