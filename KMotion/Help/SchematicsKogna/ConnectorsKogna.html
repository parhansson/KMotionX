<!DOCTYPE html>

<html>
<head>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>
<meta name="keywords" content="ethernet 16-axis controller, cnc control, motion control, cnc boards, 4-axis, 8-axis, stepper, brushless, DC motor, servo, encoder, adc, dac, motion controller, automated motion, manufacturing, Mach3">
<meta name="description" content="Manufacturer of premium motion control products for CNC Manufacturing, Robotics and Automation">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta http-equiv="Content-Language" content="en-us">
<title>Kogna Connectors</title>
<link rel="stylesheet" type="text/css" href="../css/style.css">
<link rel="stylesheet" href="../css/prism.css" data-noprefix />
<script src="../js/prism.js"></script>
<style type="text/css">
<!--
p.MsoNormal {
    margin-top: 0in;
    margin-right: 0in;
    ;
    margin-left: 0in;
    line-height: 107%;
    font-size: 11.0pt;
    font-family: "Calibri", sans-serif;
}
-->
</style>
</head>

<body>
<div id="logo"><a href="../index.htm"></a></div>

<div id="home">
<a href="../index.htm">Table of contents</a> |  
	<script>
		if (navigator.userAgent.indexOf("NT 6.2") == -1){
			document.write('<a href="https://www.dynomotion.com">Dynomotion home page</a>')
		} else {
			document.write('<a href="https://www.dynomotion.com" target="_blank">Dynomotion home page</a>')
		}
	</script>
</div>
	
<div id="searchNav">

	<div class="gcse-search">
					<script>
					  if (document.location.protocol  ==  'https:') {
					  (function() {
					  var cx = '012657033059195044748:9fmjmlufts0';
					  var gcse = document.createElement('script');
					  gcse.type = 'text/javascript';
					  gcse.async = true;
					  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					      '//cse.google.com/cse.js?cx=' + cx;
					  var s = document.getElementsByTagName('script')[0];
					  s.parentNode.insertBefore(gcse, s);
					})();
					  }
				      </script> 
				      <gcse:search> </gcse:search>  

	       </div>
</div>	

	


<div id="google_translate_element" style="background: transparent;" align="right"><script type="text/javascript">
if (navigator.userAgent.indexOf("NT 6.2") == -1) {
		function googleTranslateElementInit() {
	  new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'en,de,fr,it,es,pt,ru,uk,ar,zh-CN,zh-TW,ko,iw,hi,ja,tr', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
		}						}
	</script>
	<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit">
	</script>
</div>		
<div id="main">
  <h1>Kogna - Connector Pin outs</h1>
  <p><img src="Kogna_Web.jpg" width="900" height="640" alt=""/></p>
  <p><img src="Kogna_back_Web.jpg" width="900" height="675" alt=""/></p>
  <h2>KFLOP Equivalent Connectors J6, JR1, JP2, JP4, JP5, JP6, and JP7</h2>
  <p>These connectors have equivalent pin outs and functionality as the connectors on KFLOP. See the KFLOP Connector documentation for these connectors <a href="../SchematicsKFLOP/ConnectorsKFLOP.htm">here</a>.</p>
  <p><a href="../SchematicsKFLOP/ConnectorsKFLOP.htm#JR1">JR1 - +5V Power (regulated +/- 5%)</a></p>
  <p><a href="../SchematicsKFLOP/ConnectorsKFLOP.htm#JP2">JP2 - JTAG</a></p>
  <p><a href="../SchematicsKFLOP/ConnectorsKFLOP.htm#JP7">JP7 - Digital IO</a></p>
  <p><a href="../SchematicsKFLOP/ConnectorsKFLOP.htm#JP4">JP4 - Aux Connector #0</a></p>
  <p><a href="../SchematicsKFLOP/ConnectorsKFLOP.htm#JP6">JP6 - Aux Connector #1</a></p>
  <p><a href="../SchematicsKFLOP/ConnectorsKFLOP.htm#JP5">JP5 - GPIO  / LV Differential Connector</a></p>
  <h1>Kogna  Connectors - J14, J3, JP8, JP9, JP10, JP12, JP14, Power Lugs, JP2, JP3</h1>
  <p><a href="#J14">J14 Ethernet</a></p>
  <p><a href="#J3">J3 USB / Virtual COM Port</a></p>
  <p><a href="#JP8">JP8 - Differential Inputs / DACs</a></p>
  <p><a href="#JP9">JP9 - Aux Connector #2</a></p>
  <p><a href="#JP10">JP10 Differential Outputs / ADCS / Hi-Res PWMs</a></p>
  <p><a href="#JP12">JP12 SPI / RS422/485 / EX_IO / Opto Relay Drivers</a></p>
  <p><a href="#JP14">JP14 - Differential Inputs / Differential Outputs</a></p>
  <p><a href="#Kogna Power Lugs">Kogna Power Lugs</a></p>
  <p><a href="#JP2">JP2 USB Power Jumpe</a>r</p>
  <p><a href="#JP13">JP13 Flash Boot Jumper</a></p>
  <p>&nbsp;</p>
  <div id="J14">
    <h2><a name="J14"></a>J14 Ethernet</h2>
  </div>
  <h2><img src="J14.jpg" width="227" height="264" alt=""/></h2>
  <p>J14 is a standard RJ45 100M Ethernet connector. The metal case is connected to Kogna GND</p>
  <div id="J3">
    <h2><a name="J3"></a>J3 USB / Virtual COM Port</h2>
  </div>
  <p><img src="J3.jpg" width="317" height="331" alt=""/></p>
  <p>Standard Micro USB Connector. Shield is connected to Kogna GND. See <a href="KognaUSB.html">here</a> for more information. </p>
  <div id="JP8">
    <h1>JP8 - Differential Inputs / DACs</h1>
  </div>
  <h2><a name="JP8"></a><img src="Kogna_JP8.jpg" width="520" height="140" alt=""/></h2>
  <p>&nbsp;</p>
  <p><img src="JP8_Schematic.png" width="801" height="530" alt=""/></p>
    <p>JP8 contains the first  half of Kogna's 5V differential inputs (JP14 contains the other half). Enough for 6 A/B quadrature encoders inputs. See <a href="EncodersKogna.htm">Kogna's Encoders</a> for more information. Each encoder has an an A and B input where each A and B input has a + and - input pin. When the + pin is at a higher voltage than the - pin then the input is high. When the + pin is at a lower voltage than the - pin the input is low. The + and - pins have a moderate termination resistance of 470 Ohms. Both the + and - pins must be driven for the input to work properly (neither can be left unconnected). The differential inputs may also read as 12 General Inputs as IO Bits 225 - 236 and displayed on the Digital IO Screen as shown in red below:</p>
  <p><img src="DigitalIO_Diff0-12.png" width="675" height="532" alt=""/></p>
  <div id="KognaDACS">
  <p>JP8 also contains Kogna's 8 +/-10V Analog DACs referenced as DAC Channels #8 - #15 (#0 - #7 refer to Kanalog DACs which are available with the Kanalog Option Board).  Kogna contains an on-board 5V to +/-15V supply generator which is controlled by output Bit 279 and must be turned on in order for the DAC Outputs to be driven.  See Digital IO Screen above marked in blue.  Note the DAC Outputs will be indeterminate and non-zero until the +/-15V is activated. The current DAC settings are displayed on the Analog Status Screen shown below marked in red. The DACs have 12-bit resolution where +/-2047 counts correspond to +/-10V. All DACs update every Servo Sample time of 90us.</p>
  </div>
  <p><img src="AnalogIO_DACS.png" width="608" height="426" alt=""/></p>
  <p>&nbsp;</p>
  <table class="table" style="width:600px;">
    <tr>
      <th style="width:10%;">JP8 Pins</th>
      <th style="width:10%;">Bit</th>
      <th style="width:35%;">Description</th>
    </tr>
    <tr>
      <td>1,2</td>
      <td>225</td>
      <td>CHA0 - Encoder #8</td>
    </tr>
    <tr>
      <td>3,4</td>
      <td>226</td>
      <td>CHB0 - Encoder #8</td>
    </tr>
    <tr>
      <td>5,6</td>
      <td>227</td>
      <td>CHA1 - Encoder #9</td>
    </tr>
    <tr>
      <td>7,8</td>
      <td>228</td>
      <td>CHB1 - Encoder #9</td>
    </tr>
    <tr>
      <td>9,10</td>
      <td>229</td>
      <td>CHA2 - Encoder #10</td>
    </tr>
    <tr>
      <td>11,12</td>
      <td>230</td>
      <td>CHB2 - Encoder #10</td>
    </tr>
    <tr>
      <td>13,14</td>
      <td>231</td>
      <td>CHA3 - Encoder #11</td>
    </tr>
    <tr>
      <td>15,16</td>
      <td>232</td>
      <td>CHB3 - Encoder #11</td>
    </tr>
    <tr>
      <td>17,18</td>
      <td>233</td>
      <td>CHA4 - Encoder #12</td>
    </tr>
    <tr>
      <td>19,20</td>
      <td>234</td>
      <td>CHB4 - Encoder #12</td>
    </tr>
    <tr>
      <td>21,22</td>
      <td>235</td>
      <td>CHA5 - Encoder #13</td>
    </tr>
    <tr>
      <td>23,24</td>
      <td>236</td>
      <td>CHB5 - Encoder #14</td>
    </tr>
    <tr>
      <th>JP8 Pin</th>
      <th>DAC</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>25</td>
      <td>8</td>
      <td>+/-10V Analog DAC</td>
    </tr>
    <tr>
      <td>26</td>
      <td>9</td>
      <td>+/-10V Analog DAC</td>
    </tr>
    <tr>
      <td>27</td>
      <td>10</td>
      <td>+/-10V Analog DAC</td>
    </tr>
    <tr>
      <td>28</td>
      <td>11</td>
      <td>+/-10V Analog DAC</td>
    </tr>
    <tr>
      <td>29</td>
      <td>12</td>
      <td>+/-10V Analog DAC</td>
    </tr>
    <tr>
      <td>30</td>
      <td>13</td>
      <td>+/-10V Analog DAC</td>
    </tr>
    <tr>
      <td>31</td>
      <td>14</td>
      <td>+/-10V Analog DAC</td>
    </tr>
    <tr>
      <td>32</td>
      <td>15</td>
      <td>+/-10V Analog DAC</td>
    </tr>
    <tr>
      <th>JP8 Pin</th>
      <th>Supply</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>33</td>
      <td>+15V</td>
      <td>On-board generated +15V</td>
    </tr>
    <tr>
      <td>34</td>
      <td>-15V</td>
      <td>On-board generated +15V</td>
    </tr>
    <tr>
      <td>35</td>
      <td>+3.3V</td>
      <td>On-board generated 3.3V</td>
    </tr>
    <tr>
      <td>36</td>
      <td>+3.3V</td>
      <td>On-board generated 3.3V</td>
    </tr>
    <tr>
      <td>37</td>
      <td>+5V</td>
      <td>+5V Supply</td>
    </tr>
    <tr>
      <td>38</td>
      <td>+5V</td>
      <td>+5V Supply</td>
    </tr>
    <tr>
      <td>39</td>
      <td>0V</td>
      <td>Kogna GND</td>
    </tr>
    <tr>
      <td>40</td>
      <td>0V</td>
      <td>Kogna GND</td>
    </tr>
  </table>
  <h1>&nbsp;</h1>
  <div id="JP9">
    <h2><a name="JP9"></a>JP9 - Aux Connector #2</h2>
  </div>
  <p><img src="Kogna_JP9.jpg" width="365" height="126" alt=""/></p>
  <p>Kogna adds a 3rd 16-pin Aux Connector that is electrically equivalent to KFLOP's Aux #0 and Aux #1 connectors. The Auxiliary connector supplies power, reset, and 10 digital I/O (LVTTL 
    
    3.3V only). These digital I/O may be used for general purpose 
    
    use and are referenced as IO Bits 200 - 209. The first 8 IO (IO200 - IO207) contain 150 Ohm termination resistors (pull downs).</p>
  <p><img src="JP9_Schematic.png" width="451" height="611" alt=""/></p>
  <table class="tableMedium">
    <tr>
      <th class="col20">JP9 Pin</th>
      <th class="col20">Name</th>
      <th class="col60">Description</th>
    </tr>
    <tr>
      <td> 1</td>
      <td> VDD5</td>
      <td> +5 Volts 
        
        Output</td>
    </tr>
    <tr>
      <td> 2</td>
      <td> VDD12</td>
      <td> +12 Volts 
        
        Output</td>
    </tr>
    <tr>
      <td> 3</td>
      <td> VDD33</td>
      <td> +3.3 Volts 
        
        Output</td>
    </tr>
    <tr>
      <td> 4</td>
      <td width="22%" height="10" align="center"> RESET#</td>
      <td width="48%" height="10"> Power up Reset 
        
        (low true) output</td>
    </tr>
    <tr>
      <td> 5</td>
      <td> AUX2 IO200</td>
      <td> Gen Purpose LVTTL I/O (3.3V Only)</td>
    </tr>
    <tr>
      <td> 6</td>
      <td> AUX2 IO201</td>
      <td> Gen Purpose LVTTL I/O (3.3V Only)</td>
    </tr>
    <tr>
      <td> 7</td>
      <td> AUX2 IO202</td>
      <td> Gen Purpose LVTTL I/O (3.3V Only)</td>
    </tr>
    <tr>
      <td> 8</td>
      <td> GND</td>
      <td> Digital Ground</td>
    </tr>
    <tr>
      <td> 9</td>
      <td> GND</td>
      <td> Digital Ground</td>
    </tr>
    <tr>
      <td> 10</td>
      <td> AUX2 IO203</td>
      <td> Gen Purpose LVTTL I/O (3.3V Only)</td>
    </tr>
    <tr>
      <td> 11</td>
      <td> AUX2 IO204</td>
      <td> Gen Purpose LVTTL I/O (3.3V Only)</td>
    </tr>
    <tr>
      <td> 12</td>
      <td> AUX2 IO205</td>
      <td> Gen Purpose LVTTL I/O (3.3V Only)</td>
    </tr>
    <tr>
      <td> 13</td>
      <td> AUX2 IO206</td>
      <td> Gen Purpose LVTTL I/O (3.3V Only)</td>
    </tr>
    <tr>
      <td> 14</td>
      <td> AUX2 IO207</td>
      <td> Gen Purpose LVTTL I/O (3.3V Only)</td>
    </tr>
    <tr>
      <td> 15</td>
      <td> AUX2 IO208</td>
      <td> Gen Purpose LVTTL I/O (3.3V Only)</td>
    </tr>
    <tr>
      <td> 16</td>
      <td> AUX2 IO209</td>
      <td> Gen Purpose LVTTL I/O (3.3V Only)</td>
    </tr>
  </table>
  <h2>&nbsp;</h2>
  <div id="JP10">
    <h2><a name="JP10"></a>JP10 Differential Outputs / ADCS / Hi-Res PWMs</h2>
  </div>
  <p><img src="Kogna_JP10.jpg" width="500" height="119" alt=""/></p>
  <p>&nbsp;</p>
  <p><img src="JP10_Schematic.png" width="791" height="539" alt=""/></p>
  <p>JP10 contains the first  half of Kogna's 5V differential outputs (JP14 contains the other half). Enough for 6 Axes of Step/Direction being driven with a Differential Driver. Step/Direction Generators #0 - #5 can be configured to drive pins on JP10. See <a href="../StepAndDirection/StepAndDirKogna.htm">Kogna's Step/Direction</a> for more information. Each Step/Direction Generator has a Step and Direction Output where each Step and Direction output each has a + and - output pin. When the signal is high the + pin is driven near 5V and the - pin is driven near 0V. When the signal is low the + pin is driven near 0V and the - pin is driven near 5V.</p>
  <p>To drive single-ended (non-differential) inputs one of the signals may be used with the other left unconnected. In this case the pin is used as a +5V TTL output. To invert the polarity use the - pin rather than the + pin.</p>
  <p>If the associated Step/Direction channel is not enabled the differential outputs may be used as 12 General Outputs as IO Bits 250 - 261. The current state can be toggled from the Digital IO Screen as well as the last commanded state displayed as shown in red below:</p>
  <p><img src="DigitalIO_Diff_Out_0-12.png" width="675" height="532" alt=""/></p>
  <div id="KognaADCS">
    <p>JP10 also contains Kogna's 4 0-5V Analog ADCs referenced as ADC Channels #8 - #11 (#0 - #7 refer to Kanalog ADCs which are available with the Kanalog Option Board). </p>
  </div>
  <p>Each ADC input has a low pass filter with cutoff frequency at 1600Hz. DC Input Impedance &gt; 200K Ohms.</p>
  <p><img src="ADC_Input_Circuit.png" width="319" height="224" alt=""/></p>
  <p>The current ADC readings are displayed on the Analog Status Screen shown below marked in red. The DACs have ~11-bit resolution where 2047 counts correspond to 6.144V, however the inputs have protection diodes to the +5V supply and can not be driven above ~5.5V. All ADCs update every 1620us.</p>
  <p><img src="AnalogIO_ADCS.png" width="608" height="426" alt=""/></p>
  <p>&nbsp;</p>
  <div id="KognaHRPWMS">
    <p>JP10 also contains Kogna's 4 High-Resolution PWMS. Because these are clocked at 228MHz they are able operate at 12-bits of resolution at 55.7KHz. The example below shows how the connector pins can be set to HRPWM mode, and how the Period and and Pulse length can be set. HRPWMs #0 and #1 have a common binary prescaler (divide by 2 ^ N) and a common Period. HRPWMs #2 and #3 do not have a prescale and have independent Period registers. This example is included as HRPWM Example.c.</p>
  </div>
  <p><img src="HRPWM_Example.png" width="519" height="351" alt=""/></p>
  <p>The current HRPWM settings can be observed on the Analog Status Screen as shown in red below. </p>
  <div id="KognaPWMS">
    <p>The original (8) 8-bit 16.67 MHz PWMs, Prescale, and enables are also displayed. When enabled the PWM drives the JP6 Pin otherwise it can be used as a GPIO pins (IO Bits 26 - 33). See Analog Status Screen as shown in blue below.</p>
    <p><img src="AnalogIO_HRPWM.png" width="608" height="426" alt=""/></p>
  </div>
  <p>The current HRPWM state is displayed on the Digital IO Screen as shown below in red. These 4 3.3V LVTTL connector pins can be configured as HRPWMs or GPIO (inputs or outputs) IO Bits 280-283. In the Screen below they are shown to be HRPWM mode as shown in blue. The GPIO have fast access times as they are directly connected to Kogna's DSP.</p>
  <p><img src="DigitalIO_HRPWM.png" width="675" height="532" alt=""/></p>
  <p>&nbsp;</p>
  <h2><a name="JP10Descriptions"></a>JP10 Pin Descriptions</h2>
  <table class="table" style="width:600px;">
    <tr>
      <th style="width:10%;">JP10 Pins</th>
      <th style="width:10%;">Bit</th>
      <th style="width:35%;">Description</th>
    </tr>
    <tr>
      <td>1,2</td>
      <td>250</td>
      <td>Step #0</td>
    </tr>
    <tr>
      <td>3,4</td>
      <td>251</td>
      <td>Direction #0</td>
    </tr>
    <tr>
      <td>5,6</td>
      <td>252</td>
      <td>Step #1</td>
    </tr>
    <tr>
      <td>7,8</td>
      <td>253</td>
      <td>Direction #1</td>
    </tr>
    <tr>
      <td>9,10</td>
      <td>254</td>
      <td>Step #2</td>
    </tr>
    <tr>
      <td>11,12</td>
      <td>255</td>
      <td>Direction #2</td>
    </tr>
    <tr>
      <td>13,14</td>
      <td>256</td>
      <td>Step #3</td>
    </tr>
    <tr>
      <td>15,16</td>
      <td>257</td>
      <td>Direction #3</td>
    </tr>
    <tr>
      <td>17,18</td>
      <td>258</td>
      <td>Step #4</td>
    </tr>
    <tr>
      <td>19,20</td>
      <td>259</td>
      <td>Direction #4</td>
    </tr>
    <tr>
      <td>21,22</td>
      <td>260</td>
      <td>Step #5</td>
    </tr>
    <tr>
      <td>23,24</td>
      <td>261</td>
      <td>Direction #5</td>
    </tr>
    <tr>
      <th>JP10 Pin</th>
      <th>ADC</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>25</td>
      <td>8</td>
      <td>0-5V ADC</td>
    </tr>
    <tr>
      <td>26</td>
      <td>9</td>
      <td>0-5V ADC</td>
    </tr>
    <tr>
      <td>27</td>
      <td>10</td>
      <td>0-5V ADC</td>
    </tr>
    <tr>
      <td>28</td>
      <td>11</td>
      <td>0-5V ADC</td>
    </tr>
    <tr>
      <th>JP10 Pin</th>
      <th>PWM</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>29</td>
      <td>0</td>
      <td>Hi-Res PWM</td>
    </tr>
    <tr>
      <td>30</td>
      <td>1</td>
      <td>Hi-Res PWM</td>
    </tr>
    <tr>
      <td>31</td>
      <td>2</td>
      <td>Hi-Res PWM</td>
    </tr>
    <tr>
      <td>32</td>
      <td>3</td>
      <td>Hi-Res PWM</td>
    </tr>
    <tr>
      <th>JP10 Pin</th>
      <th>Supply</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>33</td>
      <td>+15V</td>
      <td>On-board generated +15V</td>
    </tr>
    <tr>
      <td>34</td>
      <td>-15V</td>
      <td>On-board generated +15V</td>
    </tr>
    <tr>
      <td>35</td>
      <td>+3.3V</td>
      <td>On-board generated 3.3V</td>
    </tr>
    <tr>
      <td>36</td>
      <td>+3.3V</td>
      <td>On-board generated 3.3V</td>
    </tr>
    <tr>
      <td>37</td>
      <td>+5V</td>
      <td>+5V Supply</td>
    </tr>
    <tr>
      <td>38</td>
      <td>+5V</td>
      <td>+5V Supply</td>
    </tr>
    <tr>
      <td>39</td>
      <td>0V</td>
      <td>Kogna GND</td>
    </tr>
    <tr>
      <td>40</td>
      <td>0V</td>
      <td>Kogna GND</td>
    </tr>
  </table>
  <h2>&nbsp;</h2>
  <div id="JP12">
    <h2><a name="JP12"></a>JP12 SPI / RS422/485 / EX_IO / OPTO RELAY DRIVERS</h2>
  </div>
  <p><img src="Kogna_JP12.jpg" width="500" height="114" alt=""/></p>
  <p>&nbsp;</p>
  <p><img src="JP12_Schematic.png" width="802" height="560" alt=""/></p>
  <p>JP12 contains (6) 3.3V LVTTL SPI pins connected directly to Kogna's 2-16 bit hardware SPI 1 peripheral that can theoretically operate up to 76 MHz. 3 SPI Enable pins are provided. See the TI C6748 Technical Reference Manual for operation.</p>
  <p>(2) pins can also operate as I2C Pins connected directly to Kogna's hardware I2C0 peripheral that can operate up to 400KHz.</p>
  <p>4 of the 6 pins may be used as  SPI pins or GPIO pins.  The GPIO pins are IO Bits 284 - 287. </p>
  <p>2 of the 6 pins may be used as  SPI pins or I2C pins or GPIO pins.  The GPIO pins are IO Bits 288 - 287. </p>
  <p>C Functions or Script Commands can be used to change the modes of the Pins.</p>
  <p class="MsoNormal" style="margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.5in;line-height:normal;text-autospace:none;"><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:green; ">// Controls 6 DSP Pins for SPI/I2C or GPIO (last 2  can be I2C)</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span></p>
  <p class="MsoNormal" style="margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.5in;line-height:normal;text-autospace:none;"><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">void</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> SPI_SetMode(</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">int</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:gray; ">chan</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; ">, </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">int</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:gray; ">GPIO</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; ">);&nbsp;&nbsp;&nbsp; </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:green; ">//  Set SPI mode as SPI or GPIO, 1=GPIO 0=SPI 2=I2C</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span></p>
  <p class="MsoNormal" style="margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.5in;line-height:normal;text-autospace:none;"><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">int</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> SPI_GetMode(</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">int</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:gray; ">chan</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; ">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:green; ">// Get SPI mode as SPI or GPIO or I2C, 1=GPIO 0=SPI 2=I2C</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span></p>
  <p>The current mode is displayed on the Digital IO Screens and can also be modified. See in red below.</p>
  <p><img src="DigitalIO_SPI.png" width="675" height="532" alt=""/></p>
  <p></p>
  <p>JP12 also contains  5V differential signals interfaced to Kogna's  hardware UART that operates up to 1.5Mbaud.  4 pins provide RS422/RS485 support with 5V differential Transmit and Receive signals. In RS422 mode 2 pins are used for the differential Transmit signal and 2 pins are used for the differential receive signal. In RS485 mode both Transmit and Receive operate on the same 2 pins (the other 2 pins are not used). Kogna's FPGA provides automatic output drive enable when in RS485 mode. Both differential pin pairs have 120 Ohm termination. See the circuit diagram below.</p>
  <p><img src="RS485_Schematic.png" width="652" height="365" alt=""/></p>
  <p>IO Bit 278 on selects RS485 mode and off selects RS422 mode. See the Digital IO Screen above in blue. The C Function below can be used to configure the UART for baud rate, word size, parity, and to select RS422 or RS485 mode. See the BufferedRS485Master.c and BufferedRS485 Slave Echo.c for an example of how 2 Kogna's might communicate over RS485.</p>
  <p class="MsoNormal" style="margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.5in;line-height:normal;text-autospace:none;"><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:green; ">// Rate to 1.5MBaud, nbits 5-8, Enable Parity adds  a bit, mode 1=RS485 0-RS422</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span></p>
  <p class="MsoNormal" style="margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.5in;line-height:normal;text-autospace:none;"><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">void</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> RS422_SetBaudRate(</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">int</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:gray; ">Rate</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; ">, </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">int</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:gray; ">nBits</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; ">, </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">int</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:gray; ">EnableParity</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; ">, </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">int</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:gray; ">ParityOdd</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; ">, </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:blue; ">int</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; "> </span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:gray; ">RS485_Mode</span><span style="font-family:'Cascadia Mono'; font-size:9.5pt; color:black; ">);</span></p>
  <p>&nbsp;</p>
  <p>JP12 also contains (14) 3.3 V LVTTL Extended GPIO Pins EX_IO 0 - 13 and as IO Bits 200 - 213. The current IO direction and State is displayed on the Digital IO Screen. See in red below.</p>
  <p></p>
  <p><img src="DigitalIO_EXIO_Opto.png" width="675" height="532" alt=""/></p>
  <p></p>
  <p></p>
  <p>JP12 also contains (4) Opto Isolated Relay Driver Outputs rated for up to 30V @ 0.2A. The Optos are controlled by IO Bits 274-277. Current State can be displayed and controlled using the Digital IO Screen, See above in blue.</p>
  <p></p>
  <p>The circuit below is used. </p>
  <p>For load currents &lt; 0.5ma  the on state voltage drop is &lt; 0.35V</p>
  <p>For load currents &lt; 0.2A  the on state voltage drop is &lt; 0.8V</p>
  <p><img src="Opto_Schematic.png" width="440" height="141" alt=""/></p>
  <p></p>
  <p></p>
  <p>JP12 Pin Descriptions</p>
  <table class="table" style="width:600px;">
    <tr>
      <th class="col20">JP12 Pin</th>
      <th class="col20">Bit</th>
      <th class="col60">SPI / I2C</th>
    </tr>
    <tr>
      <td> 1</td>
      <td> 284</td>
      <td> SPI SIMO</td>
    </tr>
    <tr>
      <td> 2</td>
      <td> 285</td>
      <td> SPI SOMI</td>
    </tr>
    <tr>
      <td> 3</td>
      <td> 286</td>
      <td> SPI ENAn</td>
    </tr>
    <tr>
      <td> 4</td>
      <td> 287</td>
      <td>SPI CLK</td>
    </tr>
    <tr>
      <td> 5</td>
      <td>288</td>
      <td>SPI SCn6 / I2C SDA</td>
    </tr>
    <tr>
      <td> 6</td>
      <td>289</td>
      <td>SPI SCn7 / I2C SCL</td>
    </tr>
    <tr>
      <th class="col20">JP12 Pin</th>
      <th class="col20">&nbsp;</th>
      <th class="col60">RS242/485</th>
    </tr>
    <tr>
      <td> 7</td>
      <td> ---</td>
      <td>RS422 RXD / 485 A</td>
    </tr>
    <tr>
      <td> 8</td>
      <td> ---</td>
      <td>RS422 RXD / 485 B</td>
    </tr>
    <tr>
      <td> 9</td>
      <td> ---</td>
      <td>RS422 TXD A</td>
    </tr>
    <tr>
      <td> 10</td>
      <td> ---</td>
      <td>RS422 TXD B</td>
    </tr>
    <tr>
      <th class="col20">JP12 Pin</th>
      <th class="col20">Bit</th>
      <th class="col60">EX IO / Step/Direction</th>
    </tr>
    <tr>
      <td> 11</td>
      <td>210</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O (3.3V Only) / Step 12</td>
    </tr>
    <tr>
      <td> 12</td>
      <td> 211</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O (3.3V Only) / Direction 12</td>
    </tr>
    <tr>
      <td> 13</td>
      <td> 212</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O (3.3V Only) / Step 13)</td>
    </tr>
    <tr>
      <td> 14</td>
      <td> 213</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only) / Direction 13)</td>
    </tr>
    <tr>
      <td> 15</td>
      <td> 214</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only) / Step 14)</td>
    </tr>
    <tr>
      <td> 16</td>
      <td> 215</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only) / Direction 14</td>
    </tr>
    <tr>
      <td> 17</td>
      <td> 216</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only) / Step 15</td>
    </tr>
    <tr>
      <td> 18</td>
      <td> 217</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only) / Direction 15</td>
    </tr>
    <tr>
      <td> 19</td>
      <td> 218</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only)</td>
    </tr>
    <tr>
      <td>20</td>
      <td> 219</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only)</td>
    </tr>
    <tr>
      <td>21</td>
      <td> 220</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only)</td>
    </tr>
    <tr>
      <td>22</td>
      <td> 221</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only)</td>
    </tr>
    <tr>
      <td>23</td>
      <td> 222</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only)</td>
    </tr>
    <tr>
      <td>24</td>
      <td> 223</td>
      <td style="text-align:left;padding-left:30px">Gen Purpose LVTTL I/O ((3.3V Only)</td>
    </tr>
    <tr>
      <th class="col20">JP12 Pins</th>
      <th class="col20">Bit</th>
      <th class="col60">Opto Isolated Relay Drivers</th>
    </tr>
    <tr>
      <td>25, 26</td>
      <td> 274</td>
      <td> Opto Out 0 +/-</td>
    </tr>
    <tr>
      <td>27,28</td>
      <td> 275</td>
      <td> Opto Out 1 +/-</td>
    </tr>
    <tr>
      <td>29,30</td>
      <td> 276</td>
      <td> Opto Out 2 +/-</td>
    </tr>
    <tr>
      <td>31,32</td>
      <td> 277</td>
      <td> Opto Out 3 +/-</td>
    </tr>
    <tr>
      <th>JP12 Pin</th>
      <th>Supply</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>33</td>
      <td>+15V</td>
      <td>On-board generated +15V</td>
    </tr>
    <tr>
      <td>34</td>
      <td>-15V</td>
      <td>On-board generated +15V</td>
    </tr>
    <tr>
      <td>35</td>
      <td>+3.3V</td>
      <td>On-board generated 3.3V</td>
    </tr>
    <tr>
      <td>36</td>
      <td>+3.3V</td>
      <td>On-board generated 3.3V</td>
    </tr>
    <tr>
      <td>37</td>
      <td>+5V</td>
      <td>+5V Supply</td>
    </tr>
    <tr>
      <td>38</td>
      <td>+5V</td>
      <td>+5V Supply</td>
    </tr>
    <tr>
      <td>39</td>
      <td>0V</td>
      <td>Kogna GND</td>
    </tr>
    <tr>
      <td>40</td>
      <td>0V</td>
      <td>Kogna GND</td>
    </tr>
  </table>
  <h2>&nbsp;</h2>
  <div id="JP14">
    <h1>JP14 - Differential Inputs / Differential Outputs</h1>
  </div>
  <p><img src="Kogna JP14.jpg" width="520" height="116" alt=""/></p>
  <p></p>
  <p><img src="JP14_Schematic.png" width="750" height="646" alt=""/></p>
  <p>JP14 contains the second half of Kogna's 5V differential outputs (JP10 contains the other half). Enough for 6 Axes of Step/Direction being driven with a Differential Driver. Step/Direction Generators #6 - #11 can be configured to drive pins on JP14. See <a href="../StepAndDirection/StepAndDirKogna.htm">Kogna's Step/Direction</a> for more information. Each Step/Direction Generator has a Step and Direction Output where each Step and Direction output each has a + and - output pin. When the signal is high the + pin is driven near 5V and the - pin is driven near 0V. When the signal is low the + pin is driven near 0V and the - pin is driven near 5V.</p>
  <p>To drive single-ended (non-differential) inputs one of the signals may be used with the other left unconnected. In this case the pin is used as a +5V TTL output. To invert the polarity use the - pin rather than the + pin.</p>
  <p>If the associated Step/Direction channel is not enabled the differential outputs may be used as 12 General Outputs as IO Bits 262 - 273. The current state can be toggled from the Digital IO Screen as well as the last commanded state displayed as shown in red below:</p>
  <p><img src="DigitalIO_Diff_In_Out_12-24.png" width="675" height="532" alt=""/></p>
	<p>JP14 contains the second  half of Kogna's 5V differential inputs (JP8 contains the other half). Enough for 6 A/B quadrature encoders inputs. See <a href="EncodersKogna.htm">Kogna's Encoders</a> for more information. Each encoder has an an A and B input where each A and B input has a + and - input pin. When the + pin is at a higher voltage than the - pin then the input is high. When the + pin is at a lower voltage than the - pin the input is low. The + and - pins have a moderate termination resistance of 470 Ohms. Both the + and - pins must be driven for the input to work properly (neither can be left unconnected). The differential inputs may also read as 12 General Inputs as IO Bits 237 - 248 and displayed on the Digital IO Screen as shown in blue above.</p>
  
   <h2>JP14 Pin Descriptions</h2>
  <table class="table" style="width:600px;">
    <tr>
      <th style="width:10%;">JP14 Pins</th>
      <th style="width:10%;">Bit</th>
      <th style="width:35%;">Description</th>
    </tr>
    <tr>
      <td>1,2</td>
      <td>262</td>
      <td>Step #6</td>
    </tr>
    <tr>
      <td>3,4</td>
      <td>263</td>
      <td>Direction #6</td>
    </tr>
    <tr>
      <td>5,6</td>
      <td>264</td>
      <td>Step #7</td>
    </tr>
    <tr>
      <td>7,8</td>
      <td>265</td>
      <td>Direction #7</td>
    </tr>
    <tr>
      <td>9,10</td>
      <td>266</td>
      <td>Step #8</td>
    </tr>
    <tr>
      <td>11,12</td>
      <td>267</td>
      <td>Direction #8</td>
    </tr>
    <tr>
      <td>13,14</td>
      <td>268</td>
      <td>Step #9</td>
    </tr>
    <tr>
      <td>15,16</td>
      <td>269</td>
      <td>Direction #9</td>
    </tr>
    <tr>
      <td>17,18</td>
      <td>270</td>
      <td>Step #10</td>
    </tr>
    <tr>
      <td>19,20</td>
      <td>271</td>
      <td>Direction #10</td>
    </tr>
    <tr>
      <td>21,22</td>
      <td>272</td>
      <td>Step #11</td>
    </tr>
    <tr>
      <td>23,24</td>
      <td>273</td>
      <td>Direction #11</td>
    </tr>
    <tr>
      <th style="width:10%;">JP14 Pins</th>
      <th style="width:10%;">Bit</th>
      <th style="width:35%;">Description</th>
    </tr>
    <tr>
      <td>25,26</td>
      <td>237</td>
      <td>CHA6 - Encoder #14</td>
    </tr>
    <tr>
      <td>27,28</td>
      <td>238</td>
      <td>CHB6 - Encoder #14</td>
    </tr>
    <tr>
      <td>29,30</td>
      <td>239</td>
      <td>CHA7 - Encoder #15</td>
    </tr>
    <tr>
      <td>31,32</td>
      <td>240</td>
      <td>CHB7 - Encoder #15</td>
    </tr>
    <tr>
      <td>33,34</td>
      <td>241</td>
      <td>CHA8 - Encoder #16</td>
    </tr>
    <tr>
      <td>25,36</td>
      <td>242</td>
      <td>CHB8 - Encoder #16</td>
    </tr>
    <tr>
      <td>37,38</td>
      <td>243</td>
      <td>CHA9 - Encoder #17</td>
    </tr>
    <tr>
      <td>39,40</td>
      <td>244</td>
      <td>CHB9 - Encoder #17</td>
    </tr>
    <tr>
      <td>41,42</td>
      <td>245</td>
      <td>CHA10 - Encoder #18</td>
    </tr>
    <tr>
      <td>43,44</td>
      <td>246</td>
      <td>CHB10 - Encoder #18</td>
    </tr>
    <tr>
      <td>45,46</td>
      <td>247</td>
      <td>CHA11 - Encoder #19</td>
    </tr>
    <tr>
      <td>47,48</td>
      <td>248</td>
      <td>CHB11 - Encoder #19</td>
    </tr>
    <tr>
      <th>JP14 Pin</th>
      <th>Supply</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>49</td>
      <td>+5V</td>
      <td>+5V Supply</td>
    </tr>
    <tr>
      <td>50</td>
      <td>0V</td>
      <td>Kogna GND</td>
    </tr>
  </table>
  <h1>&nbsp;</h1>
  <div id="Kogna Power Lugs">
    <h1>Kogna Power Lugs</h1>
  </div>
  <p></p>
  <p><img src="Kogna_Lugs.jpg" width="236" height="278" alt=""/></p>
  <p>Kogna has 2 Power Lugs GND and +5V that are connected in parallel to GND and +5V on JR1. These can be used to supply (or extract) +5V and GND. They are designed to work with a 4-40 screw/nut. All other Kogna Mounting holes are isolated.</p>
  <p>&nbsp;</p>
  <div id="JP2">
    <h1>JP2 USB Power Jumper</h1>
  </div>
  <p><img src="Kogna_JP2_USB_power.jpg" width="272" height="195" alt=""/></p>
  <p>Jumper JP2 connects USB Power coming in Micro USB Connector J3 to supply KFLOP with +5V. USB Power is limited to 500ma and is sufficient to power Kogna with limited IO loads and the +/-15V Generator turned off. If +/-10V Analog DAC outputs are used the +/-15V Generator must be turned on and more power supplied to Kogna. A +5V @ 2A supply should be sufficient. This is also the case with many outputs driving loads with significant current. For example 50 outputs all driving 10ma loads would increase current by ~500ma. Alternately a USB charger that supplies greater current might be used to power via J3 but obviously the USB COM Port would then not be functional.</p>
  <p>&nbsp;</p>
  <div id="JP13">
    <h1>JP13 Flash Boot Jumper</h1>
  </div>
  <p><img src="Kogna_JP13_boot_mode.jpg" width="166" height="223" alt=""/></p>
  <p>Jumper JP3 should normally always be installed to boot from Kogna's Flash memory. Kogna boots in 2 phases. First a primary boot followed by a secondary boot to the latest installed firmware and possibly User Flashed programs. In the case of a corrupted Version of Firmware or bad Flashed User Program Kogna could crash or freeze after booting. After primary booting Kogna delays while flashing its LEDs for approximately 3 seconds. If JP13 is removed during the delay Kogna will remain in the Primary boot loader to allow recovery by <a href="../ConfigurationScreen/ConfigurationScreen.htm#FLASHKOGNA">Flashing New Version</a>.</p>
</div>
</body>
</html>
